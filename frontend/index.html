<!DOCTYPE html>
<html lang="en">
<head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-2HBCVE6B9E"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-2HBCVE6B9E');
        </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Sync QR - Desktop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">File Sync QR</div>
            <div class="subtitle">Device to Device Transfer</div>
        </div>

        <div id="status" class="status generating">
            <div class="loading"></div>
            Generating QR Code...
        </div>

        <div class="main-content">
            <div class="qr-section">
                <div class="qr-container">
                    <img id="qr-code" class="qr-code hidden" src="" alt="QR Code">
                    <div id="qr-placeholder">QR Code will appear here</div>
                </div>
            </div>

            <div class="instructions-section">
                <div class="instructions">
                    <div class="disclaimer">
                        <strong>⚠ Disclaimer:</strong> QR code scanning and connection can take up to 1 minute if the server is waking up (free Render tier).
                    </div>
                    <div class="instruction-title">Instructions:</div>
                    <ol class="instruction-list">
                        <li>
                            Open the website <span id="copy-url" class="copy-url" title="Click to copy">https://file-synchronization.onrender.com/</span> in your mobile 
                            <span id="copy-status" class="copy-status">✓ Copied!</span>
                        </li>
                        <li>Scan the QR code on the left</li>
                        <li>Select and upload files from mobile</li>
                        <li>Files will automatically be available on download page</li>
                        <li>If you can't find the QR code, use the buttons below to generate a new one or go to downloads</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="button-container">
            <button id="new-session-btn" class="btn btn-secondary">Generate New QR</button>
            <button id="open-downloads-btn" class="btn btn-primary">Open Downloads Page</button>
        </div>

        <div class="footer">
            <p>Scan QR code with your mobile device to start transferring files</p>
        </div>
    </div>

        <script src="app.js"></script>
        <script>
            const urlSpan = document.getElementById('copy-url');
            const statusSpan = document.getElementById('copy-status');
            if (urlSpan) {
                urlSpan.addEventListener('click', function() {
                    const url = urlSpan.textContent.trim();
                    navigator.clipboard.writeText(url).then(() => {
                        if (statusSpan) {
                            statusSpan.style.display = 'inline-block';
                            setTimeout(() => { statusSpan.style.display = 'none'; }, 1200);
                        }
                    });
                });
            }
        </script>
</body>
</html>
